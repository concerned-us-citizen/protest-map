/* Broken out from +page.svelte to keep its size down */

.toolbar {
  position: absolute;
  top: 15px;
  right: 15px;
  z-index: 1010;
  display: flex;
  flex-direction: column;
  gap: 0; /* No gap, borders will separate */
  border-radius: 4px;
  box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2); /* Consistent shadow */
  border: 1px solid #ccc;
  overflow: hidden; /* To clip button corners if they don't match */
}

.icon-button {
  background-color: rgba(255, 255, 255, 0.95);
  border: none;
  border-radius: 0;
  padding: 0;
  box-shadow: none;
  margin: 0; /* Ensure no margin on buttons themselves */
  cursor: pointer;
  font-size: 1.1em;
  line-height: 1;
  font-weight: normal;
  width: 30px; /* Consistent with Leaflet zoom */
  height: 30px; /* Consistent with Leaflet zoom */
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box; /* Ensure padding/border don't add to size if re-added */
}

.toolbar .icon-button:not(:last-child) {
  border-bottom: 1px solid #ccc; /* Separator line, slightly darker than #ddd */
}

/* Last button in toolbar has no bottom border if it's part of the group style */
.toolbar .icon-button:last-child {
  border-bottom: none;
}

.icon-button:hover {
  background-color: #f0f0f0;
}

.attribution-link {
  /* General one, if used outside top-center */
  font-size: 0.7em;
  color: #555;
  margin-bottom: 5px;
  text-align: center;
  width: 100%;
}
.attribution-link a {
  color: #337ab7;
  text-decoration: none;
}
.attribution-link a:hover {
  text-decoration: underline;
}

.top-center-container {
  position: absolute;
  position: fixed;
  top: 15px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 8px; /* Spacing between the main title panel and current date panel */
}

.top-center-main-panel {
  background-color: rgba(255, 255, 255, 0.8);
  padding: 10px;
  border-radius: 5px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  font-family: sans-serif;
  text-align: center;
  width: 100%; /* Make panels take full width of the container */
  white-space: nowrap; /* This might need to be adjusted if content overflows */
  box-sizing: border-box;
}

.top-center-main-panel {
  font-size: 1em; /* Base font size for this panel */
}

.top-center-main-panel .main-title {
  font-size: 1.1em; /* Relative to parent panel's font-size */
  font-weight: bold;
  margin: 0px;
}

.top-center-main-panel .attribution-link {
  font-size: 0.7em; /* Relative to parent panel's font-size */
  margin-top: 4px;
  margin-bottom: 0;
}
.top-center-main-panel .attribution-link a {
  color: #337ab7;
  text-decoration: none;
}
.top-center-main-panel .attribution-link a:hover {
  text-decoration: underline;
}

.date-range-display {
  font-size: 0.8em; /* Smaller font size */
  text-align: center; /* Centered text */
  margin-top: 4px; /* Small space below the title */
  color: #555; /* Match attribution link color */
}

.current-date-panel {
  background-color: rgba(
    255,
    255,
    255,
    0.8
  ); /* Same background as main panel */
  padding: 6px 10px; /* Slightly less padding than main panel */
  border-radius: 5px; /* Rounded corners */
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15); /* Smaller shadow */
  font-family: sans-serif;
  text-align: center; /* Centered text */
  width: 100%; /* Take full width of container */
  box-sizing: border-box;
}

.current-date-panel .current-date-display {
  display: flex; /* Use flexbox to align items */
  justify-content: space-between; /* Space out the date and location count */
  align-items: center; /* Vertically align items */
}

.current-date-panel .current-date-display b {
  font-size: 1em; /* Ensure the date text is readable */
  white-space: nowrap; /* Prevent wrapping */
}

.current-date-panel .current-date-display .location-count {
  font-size: 0.9em; /* Slightly smaller font size for the count */
  color: #555; /* Match attribution link color */
  margin-left: 10px; /* Add space between date and count */
  white-space: nowrap; /* Prevent wrapping */
}

:global(.top-center-container) {
  position: static !important;
  transform: none !important;
  width: 100% !important;
}

.events-filter-wrapper {
  width: 100%;
  background-color: rgba(255, 255, 255, 0.9);
  padding: 4px 2px 8px 12px;
  border-radius: 6px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
  box-sizing: border-box;
}

.bottom-panel-container {
  position: absolute; /* Position at the bottom */
  bottom: 15px; /* Distance from the bottom */
  left: 15px; /* Distance from the left */
  right: 15px; /* Distance from the right */
  width: auto; /* Allow left/right to control width */
  z-index: 1000;
  background-color: rgba(245, 245, 245, 0.95);
  border-radius: 8px;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 3px;
  box-sizing: border-box; /* Include padding in width calculation */
}

.filter-toggle-button.dimmed {
  cursor: not-allowed;
}

.filter-toggle-button.dimmed svg {
  opacity: 0.5;
}

/* Wrapper for bottom controls */
.bottom-controls-wrapper {
  position: absolute;
  bottom: 15px; /* Match toolbar bottom margin */
  left: 25px; /* Match toolbar left margin */
  right: 25px; /* Match toolbar right margin */
  z-index: 1000; /* Ensure it's above the map */
  display: flex;
  flex-direction: column; /* Stack event info above slider */
  gap: 5px; /* Slight margin between panels */
  align-items: center; /* Center content horizontally */
  /* Removed max-width, width, and margin as left/right handle width */
  max-width: 100%; /* Ensure it doesn't exceed viewport width */
}

.slider-container {
  padding: 8px;
  width: 300px;
  position: static; /* Remove absolute positioning */
  transform: none; /* Remove transform */
  background-color: rgba(245, 245, 245, 0.95); /* Keep background */
  border-radius: 8px; /* Keep border-radius */
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); /* Keep shadow */
  z-index: 1; /* Ensure slider is below event info panel if needed */
  pointer-events: auto; /* Re-enable pointer events for the slider */
}

/* --- Mobile Styles --- */

/* General mobile styles (portrait and landscape) */
@media (max-width: 768px) {
  /* Map Display related - Hide zoom buttons on mobile */
  :global(.leaflet-control-zoom) {
    display: none !important;
  }

  .unified-top-center-box {
    top: 10px; /* Smaller margin from screen top */
    left: 50%; /* Center horizontally */
    transform: translateX(-50%); /* Center horizontally */
    width: calc(
      100% - 130px
    ); /* Further reduce width to ensure it's narrow enough */
    max-width: 280px; /* Further reduce max-width */
    height: 44px; /* Match play button height */
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 5px; /* Add some padding so text doesn't touch edges */
  }

  .top-center-main-panel {
    width: 100%;
    box-sizing: border-box;
    display: block; /* Change to block to allow stacking */
    align-items: unset; /* Remove flex alignment */
    justify-content: unset; /* Remove flex justification */
    height: auto; /* Allow height to adjust */
    white-space: normal; /* Allow text wrapping */
  }

  .top-center-main-panel .main-title {
    font-size: 0.9em; /* Slightly smaller title for mobile if needed */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: 1em; /* Adjust title font size for mobile */
  }

  .top-center-main-panel .attribution-link {
    display: none; /* Hide attribution on mobile */
  }

  .icon-button {
    width: 44px; /* Bigger play/pause button */
    height: 44px;
  }
  .icon-button svg {
    width: 28px; /* Adjust icon size within the button */
    height: 28px;
  }

  /* Ensure all toolbar buttons and their SVGs are consistently sized */
  .toolbar .icon-button {
    width: 44px !important; /* Use !important to override potential specificity issues */
    height: 44px !important;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .toolbar .icon-button svg {
    width: 28px !important;
    height: 28px !important;
  }

  /* Desktop styles - ensure EventInfo is always visible */
  @media (min-width: 769px) {
    .date-range-display {
      font-size: 0.7em; /* Slightly smaller font size for mobile */
    }
  }

  /* Make SVG wrapper take full width when buttons are hidden */
  .histogram-slider-container .svg-wrapper {
    margin: 0; /* Remove margin */
  }

  /* Attempt to hide Leaflet zoom controls again with higher specificity */
  :global(.leaflet-control-container .leaflet-control-zoom) {
    display: none !important;
  }
}

/* Portrait specific styles */
@media (max-width: 768px) and (orientation: portrait) {
  .unified-top-center-box {
    /* Adjust width to be more centered, considering vertical toolbar */
    width: calc(100% - 60px); /* Example: if toolbar is on the right */
    left: 50%;
    transform: translateX(-50%);
    max-width: 400px; /* Increase max width for title in portrait to prevent wrapping */
  }

  .current-date-panel {
    max-width: 100%; /* Allow current date panel to take full width */
    width: auto; /* Allow width to be determined by content and padding */
  }
}

/* Landscape specific styles */
@media (max-width: 768px) and (orientation: landscape) {
  /* Potentially different layout for title or other elements in landscape */
  .unified-top-center-box {
    max-width: 400px; /* Allow more width for title in landscape */
  }
}
